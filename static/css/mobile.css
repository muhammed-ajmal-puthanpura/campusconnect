/* Mobile-only refinements for the dashboard UI */
/* VISUAL UPGRADE: Premium mobile experience */

/* =====================================================
   MOBILE STABILITY & USABILITY FIXES
   ===================================================== */

/* Tablet: 768px and below */
@media (max-width: 768px) {
    .main-content {
        padding-bottom: 5.5rem;
    }

    /* Ensure buttons never break */
    .btn {
        max-width: 100%;
        overflow: visible;
    }

    /* Action buttons in tables wrap gracefully */
    .table td:last-child {
        min-width: 120px;
    }

    /* Navigation mobile menu improvements */
    .nav-menu {
        max-height: 70vh;
        overflow-y: auto;
    }

    /* Hide top hamburger toggle and footer on mobile since we use bottom nav */
    .nav-toggle { display: none !important; }
    .footer { display: none !important; }

    /* Stat cards 2-column on tablet */
    .dashboard-stats {
        gap: 0.75rem;
    }

    /* PREMIUM: Mobile bottom nav icon layout */
    .mobile-bottom-nav {
        padding: 0.5rem 0.5rem calc(0.5rem + env(safe-area-inset-bottom));
    }

    .mobile-bottom-nav a {
        flex-direction: column;
        gap: 0.2rem;
        font-size: 0.65rem;
        padding: 0.4rem 0.5rem;
        min-width: 60px;
    }

    .mobile-bottom-nav a .ph {
        font-size: 1.35em;
        margin: 0;
    }
}

/* Desktop: Hide mobile nav */
@media (min-width: 769px) {
    .mobile-bottom-nav {
        display: none !important;
    }
}

/* Small phones: 480px and below */
@media (max-width: 480px) {
    /* Ensure readable content */
    body {
        font-size: 14px;
    }

    /* Cards get less padding */
    .event-card,
    .stat-card,
    .registration-card,
    .approval-card,
    .profile-card,
    .feedback-card {
        padding: 0.875rem;
    }

    /* Headers scale down */
    h1 {
        font-size: 1.35rem !important;
    }

    h2 {
        font-size: 1.15rem !important;
    }

    /* Form card mobile */
    .form-card {
        padding: 1.25rem;
    }

    /* QR scanner fits screen */
    #qr-reader {
        min-height: 280px;
    }

    .qr-scanner-container {
        padding: 1rem;
    }
    
    /* Scanner page mobile optimizations */
    .scanner-page {
        padding: 0.75rem;
    }
    
    .scanner-header h1 {
        font-size: 1.25rem;
    }
    
    .scanner-controls {
        flex-direction: column;
    }
    
    .scanner-btn {
        width: 100%;
    }
    
    .stats-bar {
        gap: 0.75rem;
        padding: 0.75rem;
    }
    
    .stat-value {
        font-size: 1.25rem;
    }
    
    .camera-preview-container {
        border-radius: var(--radius-sm);
    }

    /* App-like full-bleed login layout: span the screen and feel native */
    .auth-app-wrapper {
        min-height: 100vh;
        display: flex;
        align-items: stretch;
        justify-content: center;
        padding: 0; /* no surrounding background */
        background: none;
    }

    /* Make the card fill the viewport on small devices */
    .auth-app-wrapper .auth-card {
        width: 100vw;
        height: 100vh;
        max-width: none;
        border-radius: 0; /* full-bleed */
        /* stronger inner boundary to clearly highlight the login area */
        box-shadow: inset 0 3px 0 rgba(15,23,42,0.08), inset 0 -3px 0 rgba(15,23,42,0.08);
        border-top: 3px solid var(--primary-color) !important;
        border-bottom: 3px solid var(--primary-color) !important;
        padding: 1.25rem 1rem;
        margin: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        gap: 0.75rem;
        position: relative; /* allow pseudo highlights */
    }

    .auth-app-wrapper .auth-card h1,
    .auth-app-wrapper .auth-card h2 { text-align: center; margin: 0; }

    .auth-app-wrapper .auth-card h1 { font-size: 1.25rem; }
    .auth-app-wrapper .auth-card h2 { font-size: 1rem; color: var(--muted); font-weight: 400; }

    .auth-app-wrapper .auth-card form { width: 100%; }
    .auth-app-wrapper .auth-card .form-group { width: 100%; }
    .auth-app-wrapper .auth-card .form-control { width: 100%; box-sizing: border-box; }
    .auth-app-wrapper .auth-card .btn-block { width: 100%; }

    .auth-app-wrapper .auth-footer { text-align: center; margin-top: .5rem; }

    /* Remove borders and background coming from global auth styles */
    .auth-app-wrapper .auth-container {
        min-height: 100vh;
        padding: 0;
        background: none !important;
        display: flex;
        align-items: stretch;
        width: 100%;
    }

    .auth-app-wrapper .auth-card {
        border-top: 3px solid var(--primary-color) !important;
        border-bottom: 3px solid var(--primary-color) !important;
        background: var(--card-bg);
    }

    /* Clear visible colored bars at very top & bottom to give the login area focus */
    .auth-app-wrapper .auth-card::before,
    .auth-app-wrapper .auth-card::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        height: 8px; /* visible band */
        pointer-events: none;
    }

    .auth-app-wrapper .auth-card::before {
        top: 0;
        background: linear-gradient(90deg, rgba(79,70,229,0.95), rgba(79,70,229,0.65));
    }

    .auth-app-wrapper .auth-card::after {
        bottom: 0;
        background: linear-gradient(270deg, rgba(79,70,229,0.95), rgba(79,70,229,0.65));
    }

    .auth-app-wrapper .auth-footer {
        border-top: none !important;
        padding-top: 0;
        margin-top: 0.5rem;
    }

    /* Prevent page scrolling only when the login wrapper is present.
       Make the wrapper fixed so it overlays the page without changing html/body. */
    .auth-app-wrapper {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100vh;
        z-index: 1500;
        overflow: hidden;
        -webkit-overflow-scrolling: touch;
    }

    .auth-app-wrapper, .auth-app-wrapper .auth-container, .auth-app-wrapper .auth-card {
        height: 100%;
    }
}

/* Very small phones: 360px and below */
@media (max-width: 360px) {
    .container {
        padding: 0 0.5rem;
    }

    .main-content {
        padding: 0.75rem 0.5rem 5.5rem;
    }

    /* Stack filter form buttons */
    .filter-form .btn {
        flex: 1 1 100%;
    }

    /* Smaller bottom nav text */
    .mobile-bottom-nav a {
        font-size: 0.6rem;
        min-width: 55px;
        padding: 0.35rem 0.3rem;
    }
    
    .mobile-bottom-nav a .ph {
        font-size: 1.2em;
    }
}